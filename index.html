<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QUESTSYSTEM ‚Äì Ring-Homepage</title>
  <meta name="description" content="QUESTSYSTEM ‚Äì √úbersicht aller Module als konzentrische Ringe. Klickbar zu den Modulbeschreibungen." />
  <style>
    :root{ --bg:#0e1116; --fg:#e7eef7; --muted:#9fb0c6; --ring-inner:#f3c0c7; --ring-mid:#f0de94; --ring-outer:#bcd5ff; --node-bg:#10151f; --node-border:#2a3344; --focus:#66ccff; --shadow:0 6px 24px rgba(0,0,0,.35) }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--fg);
      background: radial-gradient(1200px 800px at 50% 40%, #131824 0%, #0c0f16 60%, #090b11 100%); overflow:hidden}
    header{position:fixed; inset:24px 24px auto 24px; z-index:30; display:flex; gap:14px; align-items:center;
      padding:10px 14px; background:rgba(10,13,20,.6); border:1px solid #222a39; border-radius:12px; backdrop-filter: blur(6px); box-shadow:var(--shadow)}
    header a{color:var(--fg); text-decoration:none; opacity:.9} header a:hover{text-decoration:underline; opacity:1}
    .stage{position:absolute; inset:0; display:grid; place-items:center; padding:16px}
    svg{width:min(1200px,95vw); height:min(1200px,95vh)}
    .ring-inner{stroke:var(--ring-inner); stroke-width:2.2; fill:none; stroke-opacity:.9}
    .ring-mid{stroke:var(--ring-mid); stroke-width:2.2; fill:none; stroke-opacity:.9}
    .ring-outer{stroke:var(--ring-outer); stroke-width:2.2; fill:none; stroke-opacity:.9}
    svg a.node{cursor:pointer; filter: drop-shadow(0 2px 8px rgba(0,0,0,.35)); transition: transform .15s ease, opacity .2s ease}
    svg a.node:hover{ transform: translateY(-2px) scale(1.03) }
    .node circle{ fill:var(--node-bg); stroke:var(--node-border); stroke-width:1.5 }
    .node text{ font-size:12px; letter-spacing:.3px; text-anchor:middle; dominant-baseline:middle }
    .inner text{ fill:#5d2029 } .mid text{ fill:#6c5b00 } .outer text{ fill:#274b7a }
    .center circle{ fill:transparent; stroke:#59657c; stroke-dasharray:4 6 }
    .center text{ fill:#7f8ea8; font-weight:600; font-size:12px }
    .tip{position:fixed; z-index:40; pointer-events:none; transform:translate(-50%, calc(-100% - 12px));
      background:#0f1624; border:1px solid #2b3548; color:var(--fg); padding:8px 10px; border-radius:8px; font-size:12px; white-space:nowrap;
      opacity:0; transition:opacity .15s ease, transform .15s ease; box-shadow:var(--shadow)}
    .tip.show{opacity:1; transform:translate(-50%, calc(-100% - 10px))}
    .legend{position:fixed; inset:auto 16px 16px 16px; z-index:25; display:flex; gap:10px; align-items:center; justify-content:center;
      background:rgba(12,16,24,.55); border:1px solid #222a39; border-radius:10px; padding:8px 10px; backdrop-filter: blur(6px)}
    .chip{display:inline-flex; align-items:center; gap:8px; font-size:12px}
    .sw{width:14px; height:14px; border-radius:50%} .sw.inner{background:var(--ring-inner)} .sw.mid{background:var(--ring-mid)} .sw.outer{background:var(--ring-outer)}
  </style>
</head>
<body>
  <header aria-label="Seitennavigation">
    <div class="dot">üçÑ</div>
    <strong>QUESTSYSTEM ‚Äì Modul-Ringe</strong>
    <nav style="margin-left:auto">
      <a href="https://github.com/Quest42-coder/QUESTSYSTEM_PUBLIC" target="_blank" rel="noopener">Repository</a>
      <a id="nav-dignity">Dignity Clause</a>
      <a id="nav-gebote">14 Gebote (V2.1)</a>
      <a id="nav-discuss">Diskussion</a>
    </nav>
  </header>

  <div class="stage">
    <svg id="ringmap" viewBox="-600 -600 1200 1200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" role="img" aria-label="Konzentrische Modul-Ringe">
      <circle class="ring-inner" r="220"></circle>
      <circle class="ring-mid"   r="380"></circle>
      <circle class="ring-outer" r="540"></circle>
      <g class="center"><circle r="70"></circle><text y="0">RESETBOX</text></g>
    </svg>
  </div>

  <div class="legend" aria-hidden="true">
    <span class="chip"><span class="sw inner"></span>Existential</span>
    <span class="chip"><span class="sw mid"></span>Societal</span>
    <span class="chip"><span class="sw outer"></span>Structural</span>
  </div>

  <div id="tip" class="tip" role="status" aria-live="polite"></div>

  <script>
    // Basis-URL + Cache-Bust
    const BASE = (()=>{ const u=new URL(location.href); if(u.pathname.endsWith('index.html')) u.pathname=u.pathname.replace(/index\.html$/, ''); if(!u.pathname.endsWith('/')) u.pathname+='/'; return u.origin+u.pathname; })();
    const V = 'fixnodes1'; // bei Bedarf erh√∂hen ‚Üí Cache bricht
    const urlFor = (filePath) => `${BASE}module.html?file=${encodeURIComponent(filePath)}&v=${encodeURIComponent(V)}`;

    // Header-Links
    document.getElementById('nav-dignity').href = urlFor('MODULES/DIGNITY_CLAUSE.md');
    document.getElementById('nav-gebote').href  = urlFor('MODULES/14_GEBOTE_V2.1.md');
    document.getElementById('nav-discuss').href = urlFor('MODULES/14_GEBOTE_DISCUSSION.md');

    // Knotenliste (VOLLST√ÑNDIG!)
    const nodes = [
      // INNER ‚Äì Existential
      {label:"WATER",   ring:"inner", file:`MODULES/Modul_02_WATER.md`},
      {label:"SHELTER", ring:"inner", file:`MODULES/Modul_03_SHELTER.md`},
      {label:"FOOD",    ring:"inner", file:`MODULES/Modul_04_FOOD.md`},
      {label:"SLEEP",   ring:"inner", file:`MODULES/Modul_05_SLEEP.md`},
      {label:"BODY",    ring:"inner", file:`MODULES/Modul_06_BODY.md`},
      {label:"PSYCHE",  ring:"inner", file:`MODULES/Modul_07_PSYCHE.md`},
      {label:"DEVICE",  ring:"inner", file:`MODULES/Modul_08_DEVICE.md`},
      {label:"DEBT",    ring:"inner", file:`MODULES/Modul_09_DEBT.md`},

      // MID ‚Äì Societal
      {label:"WORK",     ring:"mid", file:`MODULES/Modul_10_WORK.md`},
      {label:"SCHOOL",   ring:"mid", file:`MODULES/Modul_11_SCHOOL.md`},
      {label:"BORDER",   ring:"mid", file:`MODULES/Modul_12_BORDER.md`},
      {label:"NATURE",   ring:"mid", file:`MODULES/Modul_13_NATURE.md`},
      {label:"HEALTH",   ring:"mid", file:`MODULES/Modul_14_HEALTH.md`},
      {label:"CARE",     ring:"mid", file:`MODULES/Modul_15_CARE.md`},
      {label:"FAMILY",   ring:"mid", file:`MODULES/Modul_16_FAMILY.md`},
      {label:"ANIMAL",   ring:"mid", file:`MODULES/Modul_17_ANIMAL.md`},
      {label:"CULTURE",  ring:"mid", file:`MODULES/Modul_18_CULTURE.md`},
      {label:"MEDIA",    ring:"mid", file:`MODULES/Modul_19_MEDIA.md`},
      {label:"ENERGY",   ring:"mid", file:`MODULES/Modul_20_ENERGY.md`},
      {label:"CLIMATE",  ring:"mid", file:`MODULES/Modul_21_CLIMATE.md`},
      {label:"MIGRATION",ring:"mid", file:`MODULES/Modul_22_MIGRATION.md`},
      {label:"JUSTICE",  ring:"mid", file:`MODULES/Modul_23_JUSTICE.md`},
      {label:"COMMUNITY",ring:"mid", file:`MODULES/Modul_24_COMMUNITY.md`},

      // OUTER ‚Äì Structural
      {label:"ART",        ring:"outer", file:`MODULES/Modul_40_ART.md`},
      {label:"FUTURE",     ring:"outer", file:`MODULES/Modul_41_FUTURE.md`},
      {label:"DEATH",      ring:"outer", file:`MODULES/Modul_42_DEATH.md`},
      {label:"HOUSING",    ring:"outer", file:`MODULES/Modul_26_HOUSING.md`},
      {label:"TRANSPORT",  ring:"outer", file:`MODULES/Modul_27_TRANSPORT.md`},
      {label:"NETWORK",    ring:"outer", file:`MODULES/Modul_28_NETWORK.md`},
      {label:"SYMBOL",     ring:"outer", file:`MODULES/Modul_29_SYMBOL.md`},
      {label:"TRUTH",      ring:"outer", file:`MODULES/Modul_30_TRUTH.md`},
      {label:"MEMORY",     ring:"outer", file:`MODULES/Modul_31_MEMORY.md`},
      {label:"LICENCE",    ring:"outer", file:`MODULES/Modul_32_LICENCE.md`},
      {label:"PRIVACY",    ring:"outer", file:`MODULES/Modul_33_PRIVACY.md`},
      {label:"DATA",       ring:"outer", file:`MODULES/Modul_34_DATA.md`},
      {label:"CONFLICT",   ring:"outer", file:`MODULES/Modul_35_CONFLICT.md`},
      {label:"DEMOCRACY",  ring:"outer", file:`MODULES/Modul_37_DEMOCRACY.md`},
      {label:"KNOWLEDGE",  ring:"outer", file:`MODULES/Modul_39_KNOWLEDGE.md`}
    ];

    const config = { inner:{r:220,class:"inner"}, mid:{r:380,class:"mid"}, outer:{r:540,class:"outer"} };
    const SVG_NS   = "http://www.w3.org/2000/svg";
    const XLINK_NS = "http://www.w3.org/1999/xlink";
    const svg = document.getElementById('ringmap');
    const tip = document.getElementById('tip');

    function placeNodes(){
      const groups = {inner:[], mid:[], outer:[]};
      nodes.forEach(n=>groups[n.ring].push(n));

      Object.entries(groups).forEach(([ring,list])=>{
        const radius=config[ring].r;
        const group=document.createElementNS(SVG_NS,"g");
        group.setAttribute("class",config[ring].class);
        svg.appendChild(group);

        const step=(Math.PI*2)/list.length; const start=(-Math.PI/2);

        list.forEach((n,idx)=>{
          const angle=start+idx*step;
          const x=Math.cos(angle)*radius;
          const y=Math.sin(angle)*radius;
          const url = urlFor(n.file);

          const a=document.createElementNS(SVG_NS,"a");
          a.setAttribute("href", url);
          a.setAttributeNS(XLINK_NS, "xlink:href", url);
          a.setAttribute("target","_self");
          a.setAttribute("transform",`translate(${x},${y})`);
          a.classList.add("node",config[ring].class);

          const go = () => window.location.assign(url);
          a.addEventListener('click',   e => { e.preventDefault(); go(); });
          a.addEventListener('touchend',e => { e.preventDefault(); go(); }, {passive:false});
          a.addEventListener('keydown', e => { if (e.key==='Enter'||e.key===' ') { e.preventDefault(); go(); }});
          a.setAttribute('tabindex','0'); a.setAttribute('role','link'); a.setAttribute('focusable','true');
          a.setAttribute('aria-label', `${n.label} ‚Äì √∂ffnen`);

          const circle=document.createElementNS(SVG_NS,"circle"); circle.setAttribute("r",42); a.appendChild(circle);
          const text=document.createElementNS(SVG_NS,"text"); text.textContent=n.label; a.appendChild(text);

          // Tooltip
          a.addEventListener('mouseenter',e=>showTip(n.label,e));
          a.addEventListener('mousemove',e=>moveTip(e));
          a.addEventListener('mouseleave',hideTip);

          group.appendChild(a);
        });
      });
    }

    function showTip(label,evt){ tip.innerHTML=`${label} <br><small>√ñffnen</small>`; moveTip(evt); tip.classList.add('show'); }
    function moveTip(evt){ tip.style.left=evt.clientX+'px'; tip.style.top=evt.clientY+'px'; }
    function hideTip(){ tip.classList.remove('show'); }

    placeNodes();
  </script>
</body>
</html>
